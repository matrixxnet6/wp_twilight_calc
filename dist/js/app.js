(function(t){function e(e){for(var s,i,l=e[0],c=e[1],o=e[2],p=0,m=[];p<l.length;p++)i=l[p],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&m.push(n[i][0]),n[i]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);u&&u(e);while(m.length)m.shift()();return r.push.apply(r,o||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],s=!0,l=1;l<a.length;l++){var c=a[l];0!==n[c]&&(s=!1)}s&&(r.splice(e--,1),t=i(i.s=a[0]))}return t}var s={},n={app:0},r=[];function i(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=s,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(a,s,function(e){return t[e]}.bind(null,s));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=e,l=l.slice();for(var o=0;o<l.length;o++)e(l[o]);var u=c;r.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";a("85ec")},"2f67":function(t,e,a){},"4e2d":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var s=a("2b0e"),n=a("2f62"),r=a("1da1"),i=(a("96cf"),a("d3b7"),{state:{games:[]},getters:{allGames:function(t){return t.games}},mutations:{updateGames:function(t,e){t.games=e}},actions:{fetchGames:function(t){return Object(r["a"])(regeneratorRuntime.mark((function e(){var a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://www.mafiaonline.ru/api/api.php?action=log&param=current");case 2:return a=e.sent,e.next=5,a.json();case 5:s=e.sent,t.commit("updateGames",s);case 7:case"end":return e.stop()}}),e)})))()}}}),l=a("b85c"),c=(a("07ac"),{state:{players:[{login:"Player 1"},{login:"Player 2"}]},getters:{allPlayers:function(t){return t.players}},mutations:{updatePlayers:function(t,e){t.players=e}},actions:{fetchPlayers:function(t,e){return Object(r["a"])(regeneratorRuntime.mark((function a(){var s,n,r,i,c,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:s="https://www.mafiaonline.ru/api/api.php?action=info&s=yes&param=",n=null,r=[],i=Object(l["a"])(e),a.prev=4,i.s();case 6:if((c=i.n()).done){a.next=17;break}return o=c.value,a.next=10,fetch(s+Object.values(o)[0]);case 10:return n=a.sent,a.next=13,n.json();case 13:n=a.sent,"success"==n.r?r.push({login:n.login,avatar:n.avatar.url,socStatus:"-1"!=n.stat.stat[1]?n.stat.stat[1]:null,immunity:"-1"!=n.stat.stat[0]?n.stat.stat[0]:null,attack:"-1"!=n.stat.stat[3]?n.stat.stat[3]:null,protection:"-1"!=n.stat.stat[2]?n.stat.stat[2]:null}):r.push({login:Object.values(o)[0],avatar:"https://st.mafiaonline.ru/images/roles_new/alive/64/unknown_u.png"});case 15:a.next=6;break;case 17:a.next=22;break;case 19:a.prev=19,a.t0=a["catch"](4),i.e(a.t0);case 22:return a.prev=22,i.f(),a.finish(22);case 25:t.commit("updatePlayers",r);case 26:case"end":return a.stop()}}),a,null,[[4,19,22,25]])})))()}}});s["a"].use(n["a"]);var o=new n["a"].Store({modules:{player:c,game:i}}),u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("h1",[t._v("Twilight Calculator")]),a("hr"),a("Calc",{attrs:{players:t.allPlayers,games:t.allGames}})],1)},p=[],m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"container"},[a("label",{staticClass:"rage"},[t._v(" Rage: "),a("select",{directives:[{name:"model",rawName:"v-model.number",value:t.rage,expression:"rage",modifiers:{number:!0}}],attrs:{name:"rage",id:"rage"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(e){var a="_value"in e?e._value:e.value;return t._n(a)}));t.rage=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"0"}},[t._v("No")]),a("option",{attrs:{value:"5"}},[t._v("7")]),a("option",{attrs:{value:"12.5"}},[t._v("12 (1 maf)")]),a("option",{attrs:{value:"3.125"}},[t._v("12 (2 maf)")])])])]),a("div",{staticClass:"container"},t._l(t.players,(function(e,s){return a("Player",{key:s,class:{selected:t.selected===e},attrs:{player:e,rage:t.rage,selected:t.selected},on:{selection:function(a){return t.selectPlayer(e)}}})})),1),a("h2",[t._v("Current Games")]),a("table",[t._m(0),t._l(t.twilightGames,(function(e){return a("Game",{key:e.id,class:{selected:t.selectedGame&&t.selectedGame.id===e.id},attrs:{game:e,selectedGame:t.selectedGame},on:{selectionGame:function(a){return t.selectGame(e)}}})}))],2)])},d=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("th",[t._v("id")]),a("th",[t._v("Start")]),a("th",[t._v("Players count")]),a("th",[t._v("Players")])])}],h=(a("4de4"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"player"},[t._v(" "+t._s(t.player.login)+" "),a("div",{staticClass:"flex-container"},[a("span",{staticClass:"switcher",on:{click:function(e){return t.$emit("selection")}}}),a("div",{staticClass:"flex-col"},[a("div",{staticClass:"avatar-container"},[t.player.avatar?a("img",{staticClass:"avatar",attrs:{src:t.player.avatar,width:"50",height:"50"}}):a("img",{staticClass:"avatar",attrs:{src:"https://st.mafiaonline.ru/images/avatars/nophoto_u.png",width:"50",height:"50"}})])]),a("div",{staticClass:"flex-col"},[a("label",[t._v("Soc.: "),a("input",{directives:[{name:"model",rawName:"v-model.number",value:t.player.socStatus,expression:"player.socStatus",modifiers:{number:!0}}],attrs:{type:"number"},domProps:{value:t.player.socStatus},on:{input:function(e){e.target.composing||t.$set(t.player,"socStatus",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})]),a("label",[t._v("Attack: "),a("input",{directives:[{name:"model",rawName:"v-model.number",value:t.player.attack,expression:"player.attack",modifiers:{number:!0}}],attrs:{type:"number"},domProps:{value:t.player.attack},on:{input:function(e){e.target.composing||t.$set(t.player,"attack",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})])]),a("div",{staticClass:"flex-col"},[a("label",[t._v("Immun.: "),a("input",{directives:[{name:"model",rawName:"v-model.number",value:t.player.immunity,expression:"player.immunity",modifiers:{number:!0}}],attrs:{type:"number"},domProps:{value:t.player.immunity},on:{input:function(e){e.target.composing||t.$set(t.player,"immunity",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})]),a("label",[t._v("Protect.: "),a("input",{directives:[{name:"model",rawName:"v-model.number",value:t.player.protection,expression:"player.protection",modifiers:{number:!0}}],attrs:{type:"number"},domProps:{value:t.player.protection},on:{input:function(e){e.target.composing||t.$set(t.player,"protection",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})])])]),a("div",{staticClass:"damage"},[t._m(0),a("span",[t._v("Day: "),a("strong",{staticClass:"yellow"},[t._v(t._s(t.inputDailyDamage))])]),a("span",[t._v(" | Night: "),a("strong",{staticClass:"red"},[t._v(t._s(t.inputNightDamage))])]),a("span",[t._v(" | Maniac: "),a("strong",{staticClass:"purple"},[t._v(t._s(t.inputManiacDamage))])]),a("span",[t._v(" | Heal: "),a("strong",{staticClass:"blue"},[t._v(t._s(t.inputTreatment))])]),a("br"),t._m(1),a("span",[t._v("Day: "),a("strong",{staticClass:"yellow"},[t._v(t._s(t.outputDailyDamage))])]),a("span",[t._v(" | Night: "),a("strong",{staticClass:"red"},[t._v(t._s(t.outputNightDamage))])]),a("span",[t._v(" | Maniac: "),a("strong",{staticClass:"purple"},[t._v(t._s(t.outputManiacDamage))])]),a("span",[t._v(" | Heal: "),a("strong",{staticClass:"blue"},[t._v(t._s(t.outputTreatment))])])])])}),f=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[a("strong",[t._v("In: ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[a("strong",[t._v("Out: ")])])}],v=(a("a9e3"),{name:"Player",props:{player:Object,selected:Object,rage:Number},computed:{inputDailyDamage:function(){return this.selected&&this.selected.socStatus&&this.player.immunity&&this.selected!==this.player?Math.round(+this.selected.socStatus/(+this.selected.socStatus+ +this.player.immunity)*10):"-"},inputNightDamage:function(){return this.selected&&this.selected.attack&&this.player.protection&&this.selected!==this.player?Math.round((+this.rage+10)*(+this.selected.attack/(+this.selected.attack+ +this.player.protection))):"-"},inputManiacDamage:function(){return this.selected&&this.selected.attack&&this.player.protection&&this.selected!==this.player?Math.round(+this.selected.attack/(+this.selected.attack+ +this.player.protection)*15):"-"},inputTreatment:function(){return this.selected&&this.selected.attack&&this.player.protection&&this.selected!==this.player?Math.round(+this.selected.attack/(+this.selected.attack+ +this.player.protection)*5):"-"},outputDailyDamage:function(){return this.selected&&this.player.socStatus&&this.selected.immunity&&this.selected!==this.player?Math.round(+this.player.socStatus/(+this.player.socStatus+ +this.selected.immunity)*10):"-"},outputNightDamage:function(){return this.selected&&this.player.attack&&this.selected.protection&&this.selected!==this.player?Math.round((+this.rage+10)*(+this.player.attack/(+this.player.attack+ +this.selected.protection))):"-"},outputManiacDamage:function(){return this.selected&&this.player.attack&&this.selected.protection&&this.selected!==this.player?Math.round(+this.player.attack/(+this.player.attack+ +this.selected.protection)*15):"-"},outputTreatment:function(){return this.selected&&this.player.attack&&this.selected.protection&&this.selected!==this.player?Math.round(+this.player.attack/(+this.player.attack+ +this.selected.protection)*5):"-"}}}),y=v,g=(a("6131"),a("2877")),_=Object(g["a"])(y,h,f,!1,null,null,null),b=_.exports,w=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",{staticClass:"game",on:{click:function(e){return t.$emit("selectionGame")}}},[a("td",[a("a",{attrs:{target:"_blank",href:"https://www.mafiaonline.ru/log/"+t.game.id}},[t._v(t._s(t.game.id))])]),a("td",[t._v(t._s(t.game.start))]),a("td",[t._v(t._s(t.game.player_count))]),a("td",t._l(t.game.users,(function(e,s){return a("span",{key:s},[t._v(t._s(Object.values(e)[0])),s<t.game.users.length-1?[t._v(", ")]:t._e()],2)})),0)])},k=[],P={name:"Game",props:{game:Object,selectedGame:Object}},x=P,C=(a("68e4"),Object(g["a"])(x,w,k,!1,null,null,null)),G=C.exports,O={name:"Calc",props:["players","games"],data:function(){return{selected:null,selectedGame:null,rage:0}},components:{Player:b,Game:G},methods:{selectPlayer:function(t){this.selected=t},selectGame:function(t){this.selectedGame=t,this.$store.dispatch("fetchPlayers",t.users),this.rage=0,this.selected=null}},computed:{twilightGames:function(){return this.games&&this.games.games?this.games.games.filter((function(t){return"ul3"===t.ul})):null}},mounted:function(){this.selected=this.players[0]}},j=O,$=(a("975e"),Object(g["a"])(j,m,d,!1,null,null,null)),S=$.exports,D={name:"App",components:{Calc:S},computed:{allPlayers:function(){return this.$store.getters.allPlayers},allGames:function(){return this.$store.getters.allGames}},mounted:function(){var t=this;this.$store.dispatch("fetchGames"),setInterval((function(){return t.$store.dispatch("fetchGames")}),1e4)}},M=D,N=(a("034f"),Object(g["a"])(M,u,p,!1,null,null,null)),T=N.exports;s["a"].config.productionTip=!1,new s["a"]({store:o,render:function(t){return t(T)}}).$mount("#app")},6131:function(t,e,a){"use strict";a("2f67")},"68e4":function(t,e,a){"use strict";a("4e2d")},"85ec":function(t,e,a){},"975e":function(t,e,a){"use strict";a("d409")},d409:function(t,e,a){}});
//# sourceMappingURL=app.c79cb61f.js.map